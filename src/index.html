<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>StudyBetter</title>
	<base href="/">

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/x-icon" href="favicon.ico">

	<!-- GAPI Loaded Callback -->
	<script type="text/javascript">
		window.api_key = 'AIzaSyAn0Y9g_4HSxfVAro6nd5rUuiZDYS1eBOk';
		window.client_id = '793573643843-tvo4gbajk3joidsrjsu7giesf3m6mrnp.apps.googleusercontent.com';
		window.scope = 'profile https://www.googleapis.com/auth/drive';
	
		//Called when the empty gapi is loaded. At this point, gapi is basically just a loader for google apis.
		function onGapiLoad() {
			gapi.load("client:auth2,drive-realtime,picker", login) //Load some actual apis.		
		}
	
		function loginCallback(result) {
			window.gapiLoadedAngularCallback(gapi);
			scheduleRefresh();
		}
		
		function login() {
			gapi.auth.authorize({
				//apiKey: 'AIzaSyAn0Y9g_4HSxfVAro6nd5rUuiZDYS1eBOk',
				client_id: window.client_id,
				scope: window.scope,
				immediate: true
			}, loginCallback);
		}
		
		function scheduleRefresh() {
			setTimeout(refresh, 1000 * 60 * 45); //Refresh token in 45 minutes.
		}
		
		function refresh() {
			gapi.auth.authorize({
				//apiKey: 'AIzaSyAn0Y9g_4HSxfVAro6nd5rUuiZDYS1eBOk',
				client_id: window.client_id,
				scope: window.scope,
				immediate: true
			}, scheduleRefresh);
			console.log("Token has been refreshed.");
		}
	</script>
	
	<!-- GAPI -->
	<script src="https://apis.google.com/js/api.js?onload=onGapiLoad"></script>
	
	<!-- MathJax (Everything version) -->
	<script type="text/javascript" async
		src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
	</script>
	
</head>
<body>
	<app-root>Loading...</app-root>
</body>
</html>
